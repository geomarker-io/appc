<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="appc">
<title>timeline-example • appc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="timeline-example">
<meta property="og:description" content="appc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">appc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cv-model-performance.html">cv-model-performance</a>
    <a class="dropdown-item" href="../articles/timeline-example.html">timeline-example</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/geomarker-io/appc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>timeline-example</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/geomarker-io/appc/blob/HEAD/vignettes/timeline-example.Rmd" class="external-link"><code>vignettes/timeline-example.Rmd</code></a></small>
      <div class="d-none name"><code>timeline-example.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/geomarker-io/appc" class="external-link">appc</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>This example details how to use the appc package to add air pollution
exposure estimates for exact locations and time periods defined by
geocoded coordinates and a “key” date. For this example workflow, we
will simulate 20 random locations in Wayne County, Michigan and dates of
birth between 2019 and 2022, but in actuality this can be any set of
geocoded <code>lat</code> and <code>lon</code> columns with
corresponding dates.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">tigris</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tigris/man/counties.html" class="external-link">counties</a></span><span class="op">(</span><span class="st">"MI"</span>, year <span class="op">=</span> <span class="fl">2021</span>, progress_bar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">GEOID</span> <span class="op">==</span> <span class="fl">26163</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_sample.html" class="external-link">st_sample</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="va">Y</span>, lon <span class="op">=</span> <span class="va">X</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-12-31"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span>
<span></span>
<span><span class="va">d</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 3</span></span></span>
<span><span class="co">#&gt;      lon   lat dob       </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> -<span style="color: #BB0000;">83.2</span>  42.1 2021-12-20</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> -<span style="color: #BB0000;">83.2</span>  42.1 2020-03-01</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> -<span style="color: #BB0000;">83.2</span>  42.0 2022-04-06</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> -<span style="color: #BB0000;">83.2</span>  42.1 2019-10-07</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> -<span style="color: #BB0000;">83.2</span>  42.2 2020-03-17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> -<span style="color: #BB0000;">83.3</span>  42.3 2021-11-27</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> -<span style="color: #BB0000;">82.9</span>  42.4 2020-10-11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> -<span style="color: #BB0000;">83.2</span>  42.1 2022-08-04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> -<span style="color: #BB0000;">83.2</span>  42.2 2021-02-19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> -<span style="color: #BB0000;">83.4</span>  42.3 2021-01-16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> -<span style="color: #BB0000;">83.4</span>  42.2 2022-07-03</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> -<span style="color: #BB0000;">83.0</span>  42.4 2020-07-28</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> -<span style="color: #BB0000;">83.5</span>  42.4 2020-01-03</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> -<span style="color: #BB0000;">83.1</span>  42.1 2022-08-07</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> -<span style="color: #BB0000;">83.1</span>  42.3 2020-02-12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> -<span style="color: #BB0000;">83.2</span>  42.1 2020-03-04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> -<span style="color: #BB0000;">83.3</span>  42.3 2021-01-09</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> -<span style="color: #BB0000;">82.9</span>  42.4 2022-01-21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> -<span style="color: #BB0000;">83.2</span>  42.4 2021-12-21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> -<span style="color: #BB0000;">83.5</span>  42.1 2021-06-19</span></span></code></pre></div>
<p>For this example, we want to estimate the average fine particulate
matter from 90 days prior to birth until 1 year after birth. We define
these dates and create a list-col of dates for each location in our
example data:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    start_date <span class="op">=</span> <span class="va">dob</span> <span class="op">-</span> <span class="fl">90</span>,</span>
<span>    end_date <span class="op">=</span> <span class="va">dob</span> <span class="op">+</span> <span class="fl">325.25</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">start_date</span>, <span class="va">end_date</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Next, we will use the <code>lon</code> and <code>lat</code> columns
to create the s2 geohash:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>s2 <span class="op">=</span> <span class="fu">s2</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/s2/reference/s2_cell.html" class="external-link">as_s2_cell</a></span><span class="op">(</span><span class="fu">s2</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/s2/reference/s2_geog_point.html" class="external-link">s2_geog_point</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Directly use the <code>s2</code> and <code>dates</code> columns to
call the <code><a href="../reference/predict_pm25.html">predict_pm25()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pm25 <span class="op">=</span> <span class="fu"><a href="../reference/predict_pm25.html">predict_pm25</a></span><span class="op">(</span><span class="va">s2</span>, <span class="va">dates</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> (down)loading random forest model</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> (down)loading random forest model <span style="color: #B2B2B2;">[15.7s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> checking that s2 locations are within the contiguous united states</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> checking that s2 locations are within the contiguous united states <span style="color: #B2B2B2;">[17.2s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding coordinates</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding coordinates <span style="color: #B2B2B2;">[33ms]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding elevation</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding elevation <span style="color: #B2B2B2;">[3.7s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding AADT using level 14 s2 approximation (~ 260 m sq)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding AADT using level 14 s2 approximation (~ 260 m sq) <span style="color: #B2B2B2;">[2m 0.2s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding HMS smoke data</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding HMS smoke data <span style="color: #B2B2B2;">[52s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding NARR</span></span>
<span><span class="co">#&gt; downloading 2021 air.2m:</span></span>
<span><span class="co">#&gt; downloading 2022 air.2m:</span></span>
<span><span class="co">#&gt; downloading 2019 air.2m:</span></span>
<span><span class="co">#&gt; downloading 2020 air.2m:</span></span>
<span><span class="co">#&gt; downloading 2021 hpbl:</span></span>
<span><span class="co">#&gt; downloading 2022 hpbl:</span></span>
<span><span class="co">#&gt; downloading 2019 hpbl:</span></span>
<span><span class="co">#&gt; downloading 2020 hpbl:</span></span>
<span><span class="co">#&gt; downloading 2021 acpcp:</span></span>
<span><span class="co">#&gt; downloading 2022 acpcp:</span></span>
<span><span class="co">#&gt; downloading 2019 acpcp:</span></span>
<span><span class="co">#&gt; downloading 2020 acpcp:</span></span>
<span><span class="co">#&gt; downloading 2021 rhum.2m:</span></span>
<span><span class="co">#&gt; downloading 2022 rhum.2m:</span></span>
<span><span class="co">#&gt; downloading 2019 rhum.2m:</span></span>
<span><span class="co">#&gt; downloading 2020 rhum.2m:</span></span>
<span><span class="co">#&gt; downloading 2021 vis:</span></span>
<span><span class="co">#&gt; downloading 2022 vis:</span></span>
<span><span class="co">#&gt; downloading 2019 vis:</span></span>
<span><span class="co">#&gt; downloading 2020 vis:</span></span>
<span><span class="co">#&gt; downloading 2021 pres.sfc:</span></span>
<span><span class="co">#&gt; downloading 2022 pres.sfc:</span></span>
<span><span class="co">#&gt; downloading 2019 pres.sfc:</span></span>
<span><span class="co">#&gt; downloading 2020 pres.sfc:</span></span>
<span><span class="co">#&gt; downloading 2021 uwnd.10m:</span></span>
<span><span class="co">#&gt; downloading 2022 uwnd.10m:</span></span>
<span><span class="co">#&gt; downloading 2019 uwnd.10m:</span></span>
<span><span class="co">#&gt; downloading 2020 uwnd.10m:</span></span>
<span><span class="co">#&gt; downloading 2021 vwnd.10m:</span></span>
<span><span class="co">#&gt; downloading 2022 vwnd.10m:</span></span>
<span><span class="co">#&gt; downloading 2019 vwnd.10m:</span></span>
<span><span class="co">#&gt; downloading 2020 vwnd.10m:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding NARR <span style="color: #B2B2B2;">[1m 34.4s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding MERRA</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding MERRA <span style="color: #B2B2B2;">[8.1s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding NLCD urban imperviousness</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding NLCD urban imperviousness <span style="color: #B2B2B2;">[1.3s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding NEI</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding NEI <span style="color: #B2B2B2;">[46.2s]</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> adding time components</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> adding time components <span style="color: #B2B2B2;">[52ms]</span></span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>With daily exposures, we could average fine particulate matter
throughout the study period:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>mean_pm25 <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">pm25</span>, \<span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">pm25</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 9</span></span></span>
<span><span class="co">#&gt;      lon   lat dob        start_date end_date   dates  s2     pm25     mean_pm25</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;s2ce&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> -<span style="color: #BB0000;">83.2</span>  42.1 2021-12-20 2021-09-21 2022-11-10 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      7.59</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> -<span style="color: #BB0000;">83.2</span>  42.1 2020-03-01 2019-12-02 2021-01-20 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> -<span style="color: #BB0000;">83.2</span>  42.0 2022-04-06 2022-01-06 2023-02-25 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      7.96</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> -<span style="color: #BB0000;">83.2</span>  42.1 2019-10-07 2019-07-09 2020-08-27 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> -<span style="color: #BB0000;">83.2</span>  42.2 2020-03-17 2019-12-18 2021-02-05 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.50</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> -<span style="color: #BB0000;">83.3</span>  42.3 2021-11-27 2021-08-29 2022-10-18 <span style="color: #949494;">&lt;date&gt;</span> 883b4… <span style="color: #949494;">&lt;tibble&gt;</span>      7.95</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> -<span style="color: #BB0000;">82.9</span>  42.4 2020-10-11 2020-07-13 2021-09-01 <span style="color: #949494;">&lt;date&gt;</span> 8824d… <span style="color: #949494;">&lt;tibble&gt;</span>      8.55</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> -<span style="color: #BB0000;">83.2</span>  42.1 2022-08-04 2022-05-06 2023-06-25 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.89</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> -<span style="color: #BB0000;">83.2</span>  42.2 2021-02-19 2020-11-21 2022-01-10 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> -<span style="color: #BB0000;">83.4</span>  42.3 2021-01-16 2020-10-18 2021-12-07 <span style="color: #949494;">&lt;date&gt;</span> 883b4… <span style="color: #949494;">&lt;tibble&gt;</span>      8.29</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> -<span style="color: #BB0000;">83.4</span>  42.2 2022-07-03 2022-04-04 2023-05-24 <span style="color: #949494;">&lt;date&gt;</span> 883b4… <span style="color: #949494;">&lt;tibble&gt;</span>      7.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> -<span style="color: #BB0000;">83.0</span>  42.4 2020-07-28 2020-04-29 2021-06-18 <span style="color: #949494;">&lt;date&gt;</span> 8824d… <span style="color: #949494;">&lt;tibble&gt;</span>      8.11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> -<span style="color: #BB0000;">83.5</span>  42.4 2020-01-03 2019-10-05 2020-11-23 <span style="color: #949494;">&lt;date&gt;</span> 8824a… <span style="color: #949494;">&lt;tibble&gt;</span>      7.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> -<span style="color: #BB0000;">83.1</span>  42.1 2022-08-07 2022-05-09 2023-06-28 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.87</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> -<span style="color: #BB0000;">83.1</span>  42.3 2020-02-12 2019-11-14 2021-01-02 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> -<span style="color: #BB0000;">83.2</span>  42.1 2020-03-04 2019-12-05 2021-01-23 <span style="color: #949494;">&lt;date&gt;</span> 883b3… <span style="color: #949494;">&lt;tibble&gt;</span>      8.26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> -<span style="color: #BB0000;">83.3</span>  42.3 2021-01-09 2020-10-11 2021-11-30 <span style="color: #949494;">&lt;date&gt;</span> 883b4… <span style="color: #949494;">&lt;tibble&gt;</span>      8.31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> -<span style="color: #BB0000;">82.9</span>  42.4 2022-01-21 2021-10-23 2022-12-12 <span style="color: #949494;">&lt;date&gt;</span> 88252… <span style="color: #949494;">&lt;tibble&gt;</span>      7.44</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> -<span style="color: #BB0000;">83.2</span>  42.4 2021-12-21 2021-09-22 2022-11-11 <span style="color: #949494;">&lt;date&gt;</span> 8824c… <span style="color: #949494;">&lt;tibble&gt;</span>      7.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> -<span style="color: #BB0000;">83.5</span>  42.1 2021-06-19 2021-03-21 2022-05-10 <span style="color: #949494;">&lt;date&gt;</span> 883b5… <span style="color: #949494;">&lt;tibble&gt;</span>      7.78</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Cole Brokamp, Qing Duan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
